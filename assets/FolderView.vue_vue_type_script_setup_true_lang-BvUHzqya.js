import{N as b,r as h,P as c,f as N,d as _,O as V,a0 as w,U as g,T as n,V as x,X as B,Y as U}from"./index-BMxCNfhY.js";import{u as q,_ as C,a as E,Q as F}from"./NameInput.vue_vue_type_script_setup_true_lang-Dt_sKjiu.js";import{a as I}from"./QIntersection-DOX654iP.js";import{u as Q}from"./useNotify-C7bB6SOh.js";import{u as S}from"./vue-i18n-CNk1ZW1T.js";const T={class:"flex justify-end"},Y=b({__name:"FolderView",setup(j){const{t}=S(),e=h(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),a={...e.value},r=e.value.type!=="directory",p=N("pageTitle");p.value=t(r?"layout.createFolder":"layout.editFolder");const{success:i,error:u}=Q(),{navigate:o}=I(),{createNode:m,editNode:f,isExists:d,areEqual:y}=q(),v=async()=>{if(y(a,e.value)){await o("home");return}r?await d({label:e.value.label,path:e.value.path,type:"directory",content:""})?u(t("notify.folderExists")):(await m({label:e.value.label,path:e.value.path,type:"directory",content:""}),i(t("notify.folderCreated")),await o("home")):await d({label:e.value.label,path:e.value.path,type:"directory",content:""})?u(t("notify.folderExists")):(await f({id:a.id,label:a.label,path:a.path,content:a.content,type:"directory"},{label:e.value.label,path:e.value.path,content:e.value.content,type:"directory"}),i(t("notify.folderUpdated")),await o("home"))};return _(()=>{c.removeItem("selectedNode")}),(k,l)=>(V(),w(F,{onSubmit:v,class:"q-gutter-md q-pa-lg"},{default:g(()=>[n(C,{modelValue:e.value.label,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.label=s)},null,8,["modelValue"]),n(E,{modelValue:e.value.path,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.path=s)},null,8,["modelValue"]),x("div",T,[n(U,{label:B(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{Y as _};
