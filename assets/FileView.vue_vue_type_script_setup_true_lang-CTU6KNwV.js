import{N as f,ar as g,O as v,a0 as b,X as y,al as w,r as x,P as c,f as U,d as B,U as C,T as s,V as I,Y as q}from"./index-B1GS6p5i.js";import{u as F,_ as Q,a as S,Q as E}from"./NameInput.vue_vue_type_script_setup_true_lang-BV8xHwBe.js";import{a as T}from"./QIntersection-BCbHE8ML.js";import{u as $}from"./useNotify-738yghxo.js";import{u as V}from"./vue-i18n-DDXT5T29.js";const j=f({__name:"ContentInput",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(i){const{t}=V(),e=g(i,"modelValue");return(l,o)=>(v(),b(w,{filled:"",autogrow:"",type:"textarea",modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=u=>e.value=u),label:y(t)("form.content"),rows:"3",hint:""},null,8,["modelValue","label"]))}}),k={class:"flex justify-end"},z=f({__name:"FileView",setup(i){const{t}=V(),e=x(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),l=e.value,o=e.value.type!=="file",u=U("pageTitle");u.value=t(o?"layout.createFile":"layout.editFile");const{success:d,error:r}=$(),{navigate:p}=T(),{createNode:_,editNode:N,isExists:m}=F(),h=async()=>{o?await m({label:e.value.label,path:e.value.path,type:"file",content:e.value.content})?r(t("notify.fileExists")):(await _({label:e.value.label,path:e.value.path,type:"file",content:e.value.content}),d(t("notify.fileCreated")),await p("home")):await m({label:e.value.label,path:e.value.path,type:"file",content:e.value.content})?r(t("notify.fileExists")):(await N({id:l.id,label:l.label,path:l.path,content:l.content,type:"file"},{label:e.value.label,path:e.value.path,content:e.value.content,type:"file"}),d(t("notify.fileUpdated")),await p("home"))};return B(()=>{c.removeItem("selectedNode")}),(M,a)=>(v(),b(E,{onSubmit:h,class:"q-gutter-md q-pa-lg"},{default:C(()=>[s(Q,{modelValue:e.value.label,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.label=n)},null,8,["modelValue"]),s(S,{modelValue:e.value.path,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.path=n)},null,8,["modelValue"]),s(j,{modelValue:e.value.content,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.content=n)},null,8,["modelValue"]),I("div",k,[s(q,{label:y(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{z as _};
