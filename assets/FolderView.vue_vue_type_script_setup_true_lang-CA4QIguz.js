import{O as w,am as k,P as C,r as F,S as c,j as q,as as B,e as I,T as m,a2 as p,W as x,V as i,X as Q,Z as d,_ as f,a6 as S,at as v}from"./index-D9kBV6dC.js";import{u as T,_ as U,a as j,Q as O}from"./NameInput.vue_vue_type_script_setup_true_lang-BtC5DUqF.js";import{a as P}from"./QIntersection-BEiy8kEW.js";const $={class:"flex justify-end"},W=w({__name:"FolderView",setup(D){const y=k(),{t}=C(),e=F(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),a={...e.value},o=e.value.type!=="directory",g=q("pageTitle");g.value=t(o?"layout.createFolder":"layout.editFolder");const{success:s}=B(),{navigate:n}=P(),{createNode:N,editNode:b,deleteNode:_}=T(),V=async()=>{o?await N(e.value.label.trim(),e.value.path,"directory")&&(s(t("notify.folderCreated")),await n("home")):await b(a.id,e.value.label.trim(),e.value.path,"directory",e.value.content)&&(s(t("notify.folderUpdated")),await n("home"))},h=()=>{y.dialog({title:t("dialog.deleteFolder"),message:t("dialog.deleteFolderMessage"),cancel:!0,persistent:!0}).onOk(()=>{_(a.id,a.label,a.path,a.type,a.content).then(async()=>{v.getItem("activeNode")===a.id&&v.setItem("activeNode",0),s(t("notify.fileDelete")),await n("home")}).catch(()=>{console.error("Error deleting file")})})};return I(()=>{c.removeItem("selectedNode")}),(u,l)=>(m(),p(O,{onSubmit:V,class:"q-gutter-md q-pa-lg"},{default:x(()=>[i(U,{modelValue:e.value.label,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.label=r)},null,8,["modelValue"]),i(j,{modelValue:e.value.path,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.path=r)},null,8,["modelValue"]),Q("div",$,[d(o)?S("",!0):(m(),p(f,{key:0,label:d(t)("button.delete"),color:"negative",class:"q-ml-sm",onClick:h},null,8,["label"])),i(f,{label:d(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{W as _};
