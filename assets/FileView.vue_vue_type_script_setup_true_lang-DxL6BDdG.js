import{N as c,ao as w,P as f,$ as v,X as t,ak as U,O as x,r as B,f as C,o as F,d as q,U as Q,T as u,V as S,Y as T}from"./index-iSkbz0Im.js";import{u as $,_ as k,a as I,Q as M}from"./NameInput.vue_vue_type_script_setup_true_lang-CDoi9kRX.js";import{u as p}from"./node-BVP6Z58H.js";import{a as j}from"./QIntersection-XtQHLT7_.js";import{u as O}from"./useNotify-hrSyez25.js";import{u as V}from"./vue-i18n-BYeGbwZU.js";const P=c({__name:"ContentInput",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(d){const{t:a}=V(),e=w(d,"modelValue");return(r,l)=>(f(),v(U,{filled:"",autogrow:"",type:"textarea",modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value=s),label:t(a)("form.content"),rows:"3",hint:""},null,8,["modelValue","label"]))}}),R={class:"flex justify-end"},H=c({__name:"FileView",setup(d){const{t:a}=V(),{selectedNode:e}=x(p()),{unselectNode:r}=p(),l={...e.value},s=e.value.type!=="file",i=B([]),b=C("pageTitle");b.value=a(s?"layout.createFile":"layout.editFile");const{success:m}=O(),{navigate:y}=j(),{createNode:_,editNode:N,getFolders:g}=$();F(async()=>{i.value=await g(e.value.path),e.value.path!=="/"&&(i.value=["..",...i.value])});const h=async()=>{s?(await _({label:e.value.label,path:e.value.path,type:"file",content:e.value.content}),m(a("notify.fileCreated"))):(await N({label:l.label,path:l.path,content:l.content,type:"file"},{label:e.value.label,path:e.value.path,content:e.value.content,type:"file"}),m(a("notify.fileUpdated"))),await y("home")};return q(()=>{r()}),(X,o)=>(f(),v(M,{onSubmit:h,class:"q-gutter-md q-pa-lg"},{default:Q(()=>[u(k,{modelValue:t(e).label,"onUpdate:modelValue":o[0]||(o[0]=n=>t(e).label=n)},null,8,["modelValue"]),u(I,{modelValue:t(e).path,"onUpdate:modelValue":o[1]||(o[1]=n=>t(e).path=n)},null,8,["modelValue"]),u(P,{modelValue:t(e).content,"onUpdate:modelValue":o[2]||(o[2]=n=>t(e).content=n)},null,8,["modelValue"]),S("div",R,[u(T,{label:t(a)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{H as _};
