import{N as f,ap as w,O as v,a0 as V,X as N,al as U,r as x,P as c,f as B,d as C,U as I,T as n,V as S,Y as h}from"./index-BNvMsS6_.js";import{u as q,_ as F,a as Q,Q as T}from"./NameInput.vue_vue_type_script_setup_true_lang-C0RfUO2m.js";import{a as $}from"./QIntersection-DCDDXev9.js";import{u as j}from"./useNotify-C6HZLPkq.js";import{u as _}from"./vue-i18n-ZNReUlDh.js";import{u as k}from"./node-B80wdJKb.js";const M=f({__name:"ContentInput",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(i){const{t}=_(),e=w(i,"modelValue");return(r,o)=>(v(),V(U,{filled:"",autogrow:"",type:"textarea",modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=u=>e.value=u),label:N(t)("form.content"),rows:"3",hint:""},null,8,["modelValue","label"]))}}),O={class:"flex justify-end"},D=f({__name:"FileView",setup(i){const{t}=_(),e=x(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),r={...e.value},o=e.value.type!=="file",u=B("pageTitle");u.value=t(o?"layout.createFile":"layout.editFile");const{success:d}=j(),{navigate:m}=$(),{createNode:b,editNode:y}=q(),{setActiveNode:p}=k(),g=async()=>{if(o){const a=await b(e.value.label.trim(),e.value.path,"file",e.value.content);a&&(p(a),d(t("notify.fileCreated")),await m("home"))}else{const a=await y(r.id,e.value.label.trim(),e.value.path,"file",e.value.content);a&&(p(a),d(t("notify.fileUpdated")),await m("home"))}};return C(()=>{c.removeItem("selectedNode")}),(a,l)=>(v(),V(T,{onSubmit:g,class:"q-gutter-md q-pa-lg"},{default:I(()=>[n(F,{modelValue:e.value.label,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.label=s)},null,8,["modelValue"]),n(Q,{modelValue:e.value.path,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.path=s)},null,8,["modelValue"]),n(M,{modelValue:e.value.content,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.content=s)},null,8,["modelValue"]),S("div",O,[n(h,{label:N(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{D as _};
