import{N as f,ar as g,O as v,a0 as b,X as y,al as x,r as U,P as c,f as q,d as B,U as C,T as s,V as I,Y as E}from"./index-BMxCNfhY.js";import{u as F,_ as Q,a as S,Q as T}from"./NameInput.vue_vue_type_script_setup_true_lang-Dt_sKjiu.js";import{a as $}from"./QIntersection-DOX654iP.js";import{u as j}from"./useNotify-C7bB6SOh.js";import{u as V}from"./vue-i18n-CNk1ZW1T.js";const k=f({__name:"ContentInput",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(r){const{t}=V(),e=g(r,"modelValue");return(a,o)=>(v(),b(x,{filled:"",autogrow:"",type:"textarea",modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=u=>e.value=u),label:y(t)("form.content"),rows:"3",hint:""},null,8,["modelValue","label"]))}}),M={class:"flex justify-end"},A=f({__name:"FileView",setup(r){const{t}=V(),e=U(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),a={...e.value},o=e.value.type!=="file",u=q("pageTitle");u.value=t(o?"layout.createFile":"layout.editFile");const{success:d,error:m}=j(),{navigate:i}=$(),{createNode:_,editNode:h,isExists:p,areEqual:N}=F(),w=async()=>{if(N(a,e.value)){await i("home");return}o?await p({label:e.value.label,path:e.value.path,type:"file",content:e.value.content})?m(t("notify.fileExists")):(await _({label:e.value.label,path:e.value.path,type:"file",content:e.value.content}),d(t("notify.fileCreated")),await i("home")):await p({label:e.value.label,path:e.value.path,type:"file",content:e.value.content})?m(t("notify.fileExists")):(await h({id:a.id,label:a.label,path:a.path,content:a.content,type:"file"},{label:e.value.label,path:e.value.path,content:e.value.content,type:"file"}),d(t("notify.fileUpdated")),await i("home"))};return B(()=>{c.removeItem("selectedNode")}),(O,l)=>(v(),b(T,{onSubmit:w,class:"q-gutter-md q-pa-lg"},{default:C(()=>[s(Q,{modelValue:e.value.label,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value.label=n)},null,8,["modelValue"]),s(S,{modelValue:e.value.path,"onUpdate:modelValue":l[1]||(l[1]=n=>e.value.path=n)},null,8,["modelValue"]),s(k,{modelValue:e.value.content,"onUpdate:modelValue":l[2]||(l[2]=n=>e.value.content=n)},null,8,["modelValue"]),I("div",M,[s(E,{label:y(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{A as _};
