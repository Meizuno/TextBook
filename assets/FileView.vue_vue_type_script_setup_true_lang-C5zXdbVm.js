import{K as V,aj as y,L as g,r as F,f as x,ap as k,o as B,d as Q,M as T,X as U,Y as h,P as l,T as a,al as q,O as C,U as i}from"./index-DmUV7x7I.js";import{u as S,_ as j,a as M,Q as P}from"./NameInput.vue_vue_type_script_setup_true_lang-C2I_3n-1.js";import{u as r}from"./node-EjodRlas.js";import{a as $}from"./useNavigation-BQ1VTALf.js";import{m as z}from"./github-markdown-BQ9O_dh8.js";const E={class:"row justify-between"},A=V({__name:"FileView",setup(I){const d=y(),{selectedNode:e}=g(r()),{unselectNode:m}=r(),c={...e.value},n=e.value.type!=="file",s=F([]),p=x("pageTitle");p.value=n?"New File":"Edit File";const{success:u}=k(),{navigate:f}=$(),{createNode:v,editNode:b,getFolders:w}=S();B(()=>{s.value=w(e.value.path,e.value.label),e.value.path!=="/"&&(s.value=["..",...s.value])});const _=async()=>{n?(await v(e.value),u("File created")):(await b(c,e.value),u("File updated")),await f("home")},N=async()=>{d.dialog({message:await z(e.value.content),html:!0,class:"markdown-body"})};return Q(()=>{m()}),(K,o)=>(T(),U(P,{onSubmit:_,class:"q-gutter-md q-pa-lg"},{default:h(()=>[l(j,{modelValue:a(e).label,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).label=t)},null,8,["modelValue"]),l(M,{modelValue:a(e).path,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).path=t),label:a(e).label},null,8,["modelValue","label"]),l(q,{filled:"",autogrow:"",type:"textarea",modelValue:a(e).content,"onUpdate:modelValue":o[2]||(o[2]=t=>a(e).content=t),label:"Text",rows:"3"},null,8,["modelValue"]),C("div",E,[l(i,{color:"secondary",disable:!a(e)?.content,round:"",size:"12px",icon:"remove_red_eye",onClick:N},null,8,["disable"]),l(i,{label:"Submit",type:"submit",color:"primary",class:"q-ml-sm"})])]),_:1}))}});export{A as _};
