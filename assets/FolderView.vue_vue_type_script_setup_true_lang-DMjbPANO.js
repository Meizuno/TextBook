import{N as w,r as k,P as c,f as C,d as F,O as m,a0 as p,U as q,T as i,V as B,X as d,Y as f,a4 as I,ap as v}from"./index-DUrGJN2_.js";import{u as U,_ as x,a as Q,Q as T}from"./NameInput.vue_vue_type_script_setup_true_lang-Dwn2Od_k.js";import{a as O}from"./QIntersection-Cp4GYU95.js";import{u as P}from"./useNotify-BsPaTxiY.js";import{u as S}from"./vue-i18n-oM_WjuWh.js";import{u as $}from"./use-quasar-Ci2ICE00.js";const j={class:"flex justify-end"},A=w({__name:"FolderView",setup(D){const y=$(),{t}=S(),e=k(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),a={...e.value},o=e.value.type!=="directory",g=C("pageTitle");g.value=t(o?"layout.createFolder":"layout.editFolder");const{success:s}=P(),{navigate:r}=O(),{createNode:N,editNode:b,deleteNode:_}=U(),V=async()=>{o?await N(e.value.label.trim(),e.value.path,"directory")&&(s(t("notify.folderCreated")),await r("home")):await b(a.id,e.value.label.trim(),e.value.path,"directory",e.value.content)&&(s(t("notify.folderUpdated")),await r("home"))},h=()=>{y.dialog({title:t("dialog.deleteFolder"),message:t("dialog.deleteFolderMessage"),cancel:!0,persistent:!0}).onOk(()=>{_(a.id,a.label,a.path,a.type,a.content).then(async()=>{v.getItem("activeNode")===a.id&&v.setItem("activeNode",0),s(t("notify.fileDelete")),await r("home")}).catch(()=>{console.error("Error deleting file")})})};return F(()=>{c.removeItem("selectedNode")}),(u,l)=>(m(),p(T,{onSubmit:V,class:"q-gutter-md q-pa-lg"},{default:q(()=>[i(x,{modelValue:e.value.label,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value.label=n)},null,8,["modelValue"]),i(Q,{modelValue:e.value.path,"onUpdate:modelValue":l[1]||(l[1]=n=>e.value.path=n)},null,8,["modelValue"]),B("div",j,[d(o)?I("",!0):(m(),p(f,{key:0,label:d(t)("button.delete"),color:"negative",class:"q-ml-sm",onClick:h},null,8,["label"])),i(f,{label:d(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{A as _};
