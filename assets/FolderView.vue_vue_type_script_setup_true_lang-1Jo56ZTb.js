import{O as w,am as k,P as C,r as F,S as c,j as q,as as B,e as I,a1 as m,U as p,W as U,V as i,X as x,a2 as Q,Z as d,_ as f,at as v}from"./index-Jw5mF5sL.js";import{u as S,Q as j,_ as O,a as P}from"./NameInput.vue_vue_type_script_setup_true_lang-BcCLL38q.js";import{a as T}from"./QIntersection-CDunuyId.js";const $={class:"flex justify-end"},W=w({__name:"FolderView",setup(D){const y=k(),{t}=C(),e=F(JSON.parse(c.getItem("selectedNode")??'{ "label": "", "path": "", "content": "", "type": "" }')),a={...e.value},o=e.value.type!=="directory",g=q("pageTitle");g.value=t(o?"layout.createFolder":"layout.editFolder");const{success:s}=B(),{navigate:n}=T(),{createNode:N,editNode:b,deleteNode:_}=S(),V=async()=>{o?await N(e.value.label.trim(),e.value.path,"directory")&&(s(t("notify.folderCreated")),await n("home")):await b(a.id,e.value.label.trim(),e.value.path,"directory",e.value.content)&&(s(t("notify.folderUpdated")),await n("home"))},h=()=>{y.dialog({title:t("dialog.deleteFolder"),message:t("dialog.deleteFolderMessage"),cancel:!0,persistent:!0}).onOk(()=>{_(a.id,a.label,a.path,a.type,a.content).then(async()=>{v.getItem("activeNode")===a.id&&v.setItem("activeNode",0),s(t("notify.fileDelete")),await n("home")}).catch(()=>{console.error("Error deleting file")})})};return I(()=>{c.removeItem("selectedNode")}),(u,l)=>(p(),m(j,{onSubmit:V,class:"q-gutter-md q-pa-lg"},{default:U(()=>[i(O,{modelValue:e.value.label,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.label=r)},null,8,["modelValue"]),i(P,{modelValue:e.value.path,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.path=r)},null,8,["modelValue"]),x("div",$,[d(o)?Q("",!0):(p(),m(f,{key:0,label:d(t)("button.delete"),color:"negative",class:"q-ml-sm",onClick:h},null,8,["label"])),i(f,{label:d(t)("button.submit"),type:"submit",color:"primary",class:"q-ml-sm"},null,8,["label"])])]),_:1}))}});export{W as _};
