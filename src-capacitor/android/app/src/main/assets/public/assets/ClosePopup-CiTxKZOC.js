import{c as E,a as h,h as x,b as F,Z as R,ak as A,_ as D,al as Q,r as _,g as I,u as K,x as C,m as $,p as j,B as w,C as N,o as O,am as T,e as V,an as M,ao as U,ap as W,aq as Z,ar as z}from"./index-B2sqISku.js";const H=E({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:a}){const o=h(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>x("div",{class:o.value},F(a.default))}}),J=E({name:"QItem",props:{...R,...A,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:a,emit:o}){const{proxy:{$q:r}}=I(),i=D(e,r),{hasLink:l,linkAttrs:c,linkClass:y,linkTag:q,navigateOnClick:p}=Q(),m=_(null),d=_(null),b=h(()=>e.clickable===!0||l.value===!0||e.tag==="label"),n=h(()=>e.disable!==!0&&b.value===!0),s=h(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(l.value===!0&&e.active===null?y.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(n.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),v=h(()=>e.insetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function k(t){n.value===!0&&(d.value!==null&&(t.qKeyEvent!==!0&&document.activeElement===m.value?d.value.focus():document.activeElement===d.value&&m.value.focus()),p(t))}function g(t){if(n.value===!0&&K(t,[13,32])===!0){C(t),t.qKeyEvent=!0;const u=new MouseEvent("click",t);u.qKeyEvent=!0,m.value.dispatchEvent(u)}o("keyup",t)}function S(){const t=$(a.default,[]);return n.value===!0&&t.unshift(x("div",{class:"q-focus-helper",tabindex:-1,ref:d})),t}return()=>{const t={ref:m,class:s.value,style:v.value,role:"listitem",onClick:k,onKeyup:g};return n.value===!0?(t.tabindex=e.tabindex||"0",Object.assign(t,c.value)):b.value===!0&&(t["aria-disabled"]="true"),x(q.value,t,S())}}}),X=E({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:o}){const r=I(),i=_(null);let l=0;const c=[];function y(n){const s=typeof n=="boolean"?n:e.noErrorFocus!==!0,v=++l,k=(t,u)=>{o(`validation${t===!0?"Success":"Error"}`,u)},g=t=>{const u=t.validate();return typeof u.then=="function"?u.then(f=>({valid:f,comp:t}),f=>({valid:!1,comp:t,err:f})):Promise.resolve({valid:u,comp:t})};return(e.greedy===!0?Promise.all(c.map(g)).then(t=>t.filter(u=>u.valid!==!0)):c.reduce((t,u)=>t.then(()=>g(u).then(f=>{if(f.valid===!1)return Promise.reject(f)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===l&&k(!0),!0;if(v===l){const{comp:u,err:f}=t[0];if(f!==void 0&&console.error(f),k(!1,u),s===!0){const B=t.find(({comp:P})=>typeof P.focus=="function"&&T(P.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function q(){l++,c.forEach(n=>{typeof n.resetValidation=="function"&&n.resetValidation()})}function p(n){n!==void 0&&C(n);const s=l+1;y().then(v=>{s===l&&v===!0&&(e.onSubmit!==void 0?o("submit",n):n!==void 0&&n.target!==void 0&&typeof n.target.submit=="function"&&n.target.submit())})}function m(n){n!==void 0&&C(n),o("reset"),V(()=>{q(),e.autofocus===!0&&e.noResetFocus!==!0&&d()})}function d(){M(()=>{if(i.value===null)return;const n=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),s=>s.tabIndex!==-1);n?.focus({preventScroll:!0})})}j(U,{bindComponent(n){c.push(n)},unbindComponent(n){const s=c.indexOf(n);s!==-1&&c.splice(s,1)}});let b=!1;return w(()=>{b=!0}),N(()=>{b===!0&&e.autofocus===!0&&d()}),O(()=>{e.autofocus===!0&&d()}),Object.assign(r.proxy,{validate:y,resetValidation:q,submit:p,reset:m,focus:d,getValidationComponents:()=>c}),()=>x("form",{class:"q-form",ref:i,onSubmit:p,onReset:m},F(a.default))}});function L(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const Y=W({name:"close-popup",beforeMount(e,{value:a}){const o={depth:L(a),handler(r){o.depth!==0&&setTimeout(()=>{const i=Z(e);i!==void 0&&z(i,r,o.depth)})},handlerKey(r){K(r,13)===!0&&o.handler(r)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:a,oldValue:o}){a!==o&&(e.__qclosepopup.depth=L(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});export{Y as C,X as Q,J as a,H as b};
