import{K as $,M as B,r as p,a6 as F,a5 as T,o as U,d as j,O as n,P as v,S as o,T as l,a8 as f,X as u,ad as A,ae as I,af as m,ag as b,aa as g,s as h,ac as y,a7 as _,ah as D,ai as R,aj as z,Q as K,U as M,ab as O,R as E}from"./index-B2sqISku.js";import{Q as L,C as X,a as G,b as H}from"./ClosePopup-CiTxKZOC.js";import{Q as J}from"./QPage-DP0ickp0.js";import{u as k}from"./node-B0XvSiwp.js";import{a as W}from"./useNavigation-BWspNTU1.js";import{u as Y}from"./useNode-DOyavTh_.js";const Z={class:"row justify-end"},de=$({__name:"FolderPage",setup(ee){const{selectedNode:e}=B(k()),{unselectNode:w}=k(),Q={...e.value},N=!e.value.label,s=p([]),d=p(!1),{success:c}=F(),{setTree:V}=T(),{navigate:C}=W(),{createNode:S,editNode:q,getFolders:i}=Y();U(()=>{s.value=i(e.value.path,e.value.label),s.value=i(e.value.path,e.value.label),e.value.path!=="/"&&(s.value=["..",...s.value])});const x=r=>{r===".."?e.value.path=e.value.path.split("/").slice(0,-1).join("/")||"/":e.value.path=e.value.path.replace(/\/?$/,"/")+r,s.value=i(e.value.path,e.value.label),e.value.path!=="/"&&(s.value=["..",...s.value])},P=async()=>{N?(await S({key:e.value.key,label:e.value.label,path:e.value.path,type:"directory",content:"",children:[],header:"",icon:""}),c("Folder created")):(await q(Q,e.value),c("folder updated")),await V(),await C("home")};return j(()=>{w()}),(r,t)=>(n(),v(J,null,{default:o(()=>[l(L,{onSubmit:P,class:"q-gutter-md q-pa-lg"},{default:o(()=>[l(f,{filled:"",clearable:"",type:"text",modelValue:u(e).label,"onUpdate:modelValue":t[0]||(t[0]=a=>u(e).label=a),label:"Name",rules:[a=>a&&a.length>0]},null,8,["modelValue","rules"]),l(f,{filled:"",type:"text",modelValue:u(e).path,"onUpdate:modelValue":t[1]||(t[1]=a=>u(e).path=a),label:"Path",onClick:t[2]||(t[2]=a=>d.value=!0),readonly:""},null,8,["modelValue"]),l(A,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=a=>d.value=a)},{default:o(()=>[l(I,{class:m([r.$q.dark.isActive?"bg-dark text-white":"bg-white text-dark","w-80 shadow-lg rounded-md"])},{default:o(()=>[l(b,{class:m([r.$q.dark.isActive?"bg-grey-9 text-white":"bg-primary text-white","flex justify-between"])},{default:o(()=>[t[4]||(t[4]=g("div",{class:"text-h6"},"Path",-1)),h(l(y,{flat:"",color:r.$q.dark.isActive?"primary":"white",label:"OK"},null,8,["color"]),[[X]])]),_:1},8,["class"]),l(b,{class:"p-4"},{default:o(()=>[(n(!0),_(R,null,D(s.value,a=>h((n(),v(G,{key:a,clickable:"",class:m([r.$q.dark.isActive?"hover:bg-grey-7":"hover:bg-grey-2","rounded-md"]),onClick:ae=>x(a)},{default:o(()=>[l(K,{color:"primary",name:"folder",size:"md",class:"q-mr-sm"}),l(H,null,{default:o(()=>[M(O(a),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[E]])),128))]),_:1}),l(z)]),_:1},8,["class"])]),_:1},8,["modelValue"]),g("div",Z,[l(y,{label:"Submit",type:"submit",color:"primary",class:"q-ml-sm"})])]),_:1})]),_:1}))}});export{de as default};
